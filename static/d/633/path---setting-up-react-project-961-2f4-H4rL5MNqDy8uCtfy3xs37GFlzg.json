{"data":{"site":{"siteMetadata":{"title":"YShean Dev Log","author":"Yong Shean"}},"markdownRemark":{"id":"51426ca8-b79d-5768-a38a-b9aa22f79a7d","excerpt":"Disclaimer: Iâ€™ve only started to document the process at the end of it (because I did NOT expect it to be this difficult!), so following the exact steps mightâ€¦","html":"<p>Disclaimer: Iâ€™ve only started to document the process at the end of it (because I did NOT expect it to be this difficult!), so following the exact steps <em>might</em> not work. Anyway, Iâ€™ve included the end result (you can find in the GitHub link), and also the pages which I referred when I was setting up.</p>\n<p>Our toolbelt:</p>\n<ul>\n<li>React</li>\n<li>Typescript</li>\n<li>Apollo GraphQL</li>\n<li>Jest (testing)</li>\n<li>Storybook (documentation)</li>\n</ul>\n<h2>Create React App</h2>\n<p>Well, of course we will start with the original <code class=\"language-text\">create-react-app</code> utility â€” a great tool by React team to kickstart any React project!</p>\n<h2>Setting up Storybook</h2>\n<p>Since Iâ€™m going to use Typescript, I will follow the instruction <a href=\"https://storybook.js.org/docs/configurations/typescript-config/\">here</a>. There seems to be a few ways to achieve the same, I will be using the recommended way <em>Setting up TypeScript with awesome-typescript-loader</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D typescript\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D awesome-typescript-loader\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @types/storybook__react <span class=\"token comment\"># typings</span>\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @storybook/addon-info react-docgen-typescript-loader <span class=\"token comment\"># optional but recommended</span>\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D jest <span class=\"token string\">\"@types/jest\"</span> ts-jest <span class=\"token comment\">#testing</span></code></pre></div>\n<p>Typescript would complain that type definition for the addons are missing, letâ€™s add them:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @types/storybook__addon-actions\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @types/storybook__addon-links</code></pre></div>\n<h2>Setting up Testing</h2>\n<p>Iâ€™m thrilled to find out that there is an official integration between Storybook and Jest Snapshot Testing â€” more details <a href=\"https://storybook.js.org/docs/testing/structural-testing/\">here</a>. Letâ€™s install them:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @storybook/addon-storyshots\n<span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D @types/storybook__addon-storyshots <span class=\"token comment\"># if you are using Typescript</span></code></pre></div>\n<p><code class=\"language-text\">create-react-app</code> complains that the installed version of <code class=\"language-text\">jest</code> is not compatible. So similar trick to solve the incompatibility of <code class=\"language-text\">babel-loader</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> --dev jest@24.7.1 --exact</code></pre></div>\n<p>Aww snap! Running <code class=\"language-text\">yarn test</code> in the terminal results in:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Cannot <span class=\"token function\">find</span> module <span class=\"token string\">'react-test-renderer'</span> from <span class=\"token string\">'renderTree.js'</span></code></pre></div>\n<p>After searching, finally found someone in GitHub saying by installing <code class=\"language-text\">react-test-renderer</code> package solves the issue. Hence I did the same:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> -D react-test-renderer</code></pre></div>\n<p>And thenâ€¦ I run <code class=\"language-text\">yarn test</code> again, and nowâ€¦</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Error: EMFILE: too many <span class=\"token function\">open</span> files, <span class=\"token function\">watch</span></code></pre></div>\n<p>Oh God whyâ€¦\nLuckily I found another guy on GitHub saying that installing <code class=\"language-text\">watchman</code> solves the issue, so againâ€¦</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">brew <span class=\"token function\">install</span> watchman</code></pre></div>\n<p>Yay! The tests are finally running âœ¨</p>\n<hr>\n<p><em>Written with ðŸ’Œ by Yong Shean. Iâ€™m currently looking for a frontend engineering job, preferably remote, or based in Kuala Lumpur. Iâ€™m also open to opportunities to work outside of Malaysia, e.g. in the U.S. if visa is sponsored.</em></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">res<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"Setting up a React project","date":"May 20, 2019","description":"I'll show you how I bootstrapped my own version of create-react-app!"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/setting-up-react-project/","previous":{"fields":{"slug":"/automated-testing-with-cypress/"},"frontmatter":{"title":"Automated Testing with Cypress"}},"next":null}}